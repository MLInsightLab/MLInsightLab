{% extends "page.html" %}
{% block main %}
  {% block login %}
    <div id="login-main" class="container">
      <form action="{{ authenticator_login_url | safe }}"
            method="post"
            role="form">
        <div class="auth-form-header">
          <h1>Sign in</h1>
        </div>
        <div class='auth-form-body m-auto'>
          {% if login_error %}<p class="login_error">{{ login_error }}</p>{% endif %}
          <input type="hidden" name="_xsrf" value="{{ xsrf }}" />
          <label for="username_input">Username:</label>
          <input id="username_input"
                 type="text"
                 autocapitalize="off"
                 autocorrect="off"
                 autocomplete="username"
                 class="form-control"
                 name="username"
                 val="{{ username }}"
                 autofocus="autofocus" />
          <label for='password_input'>Password:</label>
          <input type="password"
                 class="form-control"
                 autocomplete="current-password"
                 name="password"
                 id="password_input" />
          <div class="feedback-container">
            <input id="login_submit"
                   type="submit"
                   class='btn btn-jupyter form-control'
                   value='Sign in'
                   tabindex="3" />
            <div class="feedback-widget hidden">
              <i class="fa fa-spinner"></i>
            </div>
          </div>
        </div>
      </form>
    </div>
  {% endblock login %}
{% endblock main %}
{% block script %}
  {{ super() }}
  <script>
    // setup onSubmit feedback
    $('form').submit((e) => {
      var form = $(e.target);
      form.find('.feedback-container>input').attr('disabled', true);
      form.find('.feedback-container>*').toggleClass('hidden');
      form.find('.feedback-widget>*').toggleClass('fa-pulse');
    });
  </script>
{% endblock script %}
